package terminal.communication.tests;

import static org.junit.Assert.*;

import org.junit.Test;

import terminal.communication.StackStreamMessage;
import terminal.communication.StackStreamMessageParser;

public class StackSteamMessageParserTest {

	StackStreamMessageParser _parser = new StackStreamMessageParser(); 

	@Test
	public void testParseTaskNameWithParametersSuccess() {
		String testInputString = "data: ExeStack: changed : P1 code=1, node=Task(PathPlanning(x=1,y=2)) [id=asdasdasd]";
		StackStreamMessage message = _parser.parse(testInputString);
		
		assertNotNull(message);
		assertEquals("P1", message.getPlanLabel());
		assertEquals("Task", message.getTaskName());
		assertEquals("PathPlanning(x=1,y=2)", message.getTaskParameters());
		assertEquals("1d3b4a-345fcd3", message.getTaskId());
	}
	
	@Test
	public void testParseTaskFailure() {
		String testInputString = "data: ExeStack: changed : P1 code=1, node=Sequence(S)($Sequence(S):FAILURE(1)$)(";
		StackStreamMessage message = _parser.parse(testInputString);
		
		assertNotNull(message);
		assertEquals("P1", message.getPlanLabel());
		assertEquals("Sequence", message.getTaskName());
		assertEquals("S", message.getTaskParameters());
	}
}
